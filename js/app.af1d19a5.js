(function(){"use strict";var e={8384:function(e,t,r){var i=r(8935),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Scene")],1)},o=[],s=r(3254),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"scene",staticClass:"scene"},[r("Board",{attrs:{size:16}})],1)},d=[],a=r(3796),l=r(3226),h=r(3448);function u(e){return e.toString().split("").reduce(((e,t)=>(e=(e<<5)-e+t.charCodeAt(0),e&e)),0)}class p{constructor(e,t){(0,a.Z)(this,"listeners",{}),(0,a.Z)(this,"raycaster",new l.iMs),(0,a.Z)(this,"mouse",new l.FM8),(0,a.Z)(this,"camera",void 0),(0,a.Z)(this,"element",void 0),this.camera=e,this.element=t}raycast(e,t,r){this.mouse.x=e.clientX/this.element.clientWidth*2-1,this.mouse.y=-e.clientY/this.element.clientHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const i=this.raycaster.intersectObjects([t])[0];i&&r(e)}on(e,t,r){if(this.listeners[e]||(this.listeners[e]={}),!t)return;const i=e=>this.raycast(e,t,r),n=this.listeners[e],o=u(r);n&&(n[o]=i,this.element.addEventListener(e,i))}off(e,t){const r=u(t),i=this.listeners[e];if(i){const t=i[r];t&&(this.element.removeEventListener(e,t),i[r]=void 0)}}}var f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._l(this.manager.board.grid[0].filter((function(e){return!e.filled})),(function(e){return r("Arrow",{key:e.x,attrs:{col:e.x}})})),e._l(this.manager.board.discs.slice(0,42),(function(e){return r("Disc",{key:e.id,attrs:{x:e.x,z:e.z,id:e.id,color:e.color,dropped:e.dropped}})}))],2)},g=[],m=r(6903);class v{constructor(){(0,a.Z)(this,"discs",[]),(0,a.Z)(this,"grid",void 0),this.grid=this.createGrid(),this.discs.push({id:0,color:"RED",dropped:!1,x:0,z:-.14})}createGrid(){const e=[],t=.02822279930114746,r=.0847,i=.0679;for(let n=0;n<6;n++){e[n]=[];for(let o=0;o<7;o++)e[n].push({x:o*t-r,z:n*t-i,filled:!1})}return e}isValidLocation(e){for(let t=this.grid.length-1;t>=0;t--){const r=this.grid[this.grid.length-1].findIndex((t=>t.x===e));if(!this.grid[t][r].filled)return this.grid[t][r].filled=!0,this.grid[t][r]}return null}getDiscById(e){return this.discs.find((t=>t.id===e))}}class w{constructor(){(0,a.Z)(this,"board",void 0),this.board=new v}drop(e){const t=this.board.isValidLocation(e);if(t){const e=this.getCurrentDisc();if(!e)return;e.x=t.x,e.z=t.z,e.dropped=!0,this.spawnNext(e.color,e.id)}}spawnNext(e,t){this.board.discs.push({id:t+1,color:"RED"===e?"YELLOW":"RED",dropped:!1,x:0,z:-.14})}getCurrentDisc(){return this.board.discs.find((e=>!e.dropped))}}var b=r(2932),y=r(7039),x=function(){var e=this,t=e.$createElement;e._self._c;return e._e()},Z=[],$=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let O=class extends s.w3{constructor(...e){super(...e),(0,a.Z)(this,"col",void 0),(0,a.Z)(this,"model",void 0),(0,a.Z)(this,"$parent",void 0)}moveCurrentDisc(){try{const e=this.$parent.manager.getCurrentDisc();e&&e.model&&b.ZP.to(e.model.scene.position,{duration:2,ease:"elastic",x:this.col})}catch(e){console.log(e)}}};$([(0,s.fI)({type:Number,required:!0})],O.prototype,"col",void 0),O=$([(0,s.wA)({mounted(){this.$nextTick((()=>{this.$nextTick((()=>this.$parent.gltfLoader.load("assets/arrow.glb",(e=>{this.model=e,this.model.scene.position.set(this.col,0,-.1),this.$parent.$parent.raycaster.on("pointermove",this.model.scene,(()=>this.moveCurrentDisc())),this.$parent.$parent.raycaster.on("pointerdown",this.model.scene,(()=>this.$parent.manager.drop(this.col))),b.ZP.timeline({repeat:-1,yoyo:!0,defaults:{duration:.25}}).to(this.model.scene.position,{z:-.105}),this.$parent.glbBoard?.scene.add(this.model.scene)}))))}))},destroyed(){this.$parent.glbBoard?.scene.remove(this.model.scene)}})],O);var j=O,z=j,P=r(1001),R=(0,P.Z)(z,x,Z,!1,null,null,null),D=R.exports,L=function(){var e=this,t=e.$createElement;e._self._c;return e._e()},B=[],E=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};b.p8.registerPlugin(y.X);let k=class extends s.w3{constructor(...e){super(...e),(0,a.Z)(this,"color",void 0),(0,a.Z)(this,"id",void 0),(0,a.Z)(this,"x",void 0),(0,a.Z)(this,"z",void 0),(0,a.Z)(this,"dropped",void 0),(0,a.Z)(this,"model",void 0),(0,a.Z)(this,"$parent",void 0)}isDropped(){this.drop()}drop(){b.p8.timeline({defaults:{duration:.5}}).to(this.model.scene.position,{duration:0,ease:"elastic",x:this.x}).to(this.model.scene.position,{x:this.x,z:this.z,duration:.5,ease:"bounce"})}};E([(0,s.fI)({type:String,required:!0})],k.prototype,"color",void 0),E([(0,s.fI)({type:Number,required:!0})],k.prototype,"id",void 0),E([(0,s.fI)({type:Number,required:!0})],k.prototype,"x",void 0),E([(0,s.fI)({type:Number,required:!0})],k.prototype,"z",void 0),E([(0,s.fI)({type:Boolean,required:!0})],k.prototype,"dropped",void 0),E([(0,s.RL)("dropped")],k.prototype,"isDropped",null),k=E([(0,s.wA)({mounted(){this.$nextTick((()=>{this.$nextTick((()=>this.$parent.gltfLoader.load(`assets/${this.color.toLowerCase()}-disc.glb`,(e=>{this.model=e;const t=this.$parent.manager.board.getDiscById(this.id);t&&(t.model=this.model),this.model.scene.position.x=this.x,this.model.scene.position.z=this.z,this.$parent.glbBoard.scene.add(this.model.scene)}))))}))},destroyed(){this.$parent.glbBoard.scene.remove(this.model.scene)}})],k);var _=k,C=_,A=(0,P.Z)(C,L,B,!1,null,null,null),I=A.exports,N=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};b.p8.registerPlugin(y.X);let T=class extends s.w3{constructor(...e){super(...e),(0,a.Z)(this,"gltfLoader",new m.E),(0,a.Z)(this,"manager",new w),(0,a.Z)(this,"glbBoard",void 0),(0,a.Z)(this,"disc",void 0),(0,a.Z)(this,"$parent",void 0)}generateBoard(){this.$nextTick((()=>{this.gltfLoader.load("assets/board.glb",(e=>{this.glbBoard=e,this.resetBoardPosition(),this.$parent.scene.add(e.scene)}))}))}dropDisc(){b.p8.to(this.disc.scene.position,{ease:"bounce",z:.0725})}resetBoardPosition(){this.glbBoard.scene.rotateX(Math.PI/2),this.glbBoard.scene.rotateY(0)}};T=N([(0,s.wA)({components:{Arrow:D,Disc:I},mounted(){this.generateBoard()},destroyed(){this.$parent.scene.remove(this.glbBoard.scene)}})],T);var q=T,S=q,W=(0,P.Z)(S,f,g,!1,null,null,null),F=W.exports,M=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let H=class extends s.w3{constructor(...e){super(...e),(0,a.Z)(this,"hemisphereLight",new l.vmT(11184810,0,.9)),(0,a.Z)(this,"directionalLight",new l.Ox3(16777215,.9)),(0,a.Z)(this,"ambientLight",new l.Mig(14452852,.5)),(0,a.Z)(this,"renderer",new l.CP7({alpha:!0})),(0,a.Z)(this,"camera",void 0),(0,a.Z)(this,"controls",void 0),(0,a.Z)(this,"raycaster",void 0),(0,a.Z)(this,"scene",new l.xsS)}animate(){this.renderer.render(this.scene,this.camera),this.controls.update(),requestAnimationFrame(this.animate)}onWindowResize(){this.camera&&this.renderer&&(this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight))}};H=M([(0,s.wA)({components:{Board:F},mounted(){this.camera=new l.cPb(90,window.innerWidth/window.innerHeight,.1,1e3),this.controls=new h.z(this.camera,this.renderer.domElement),this.raycaster=new p(this.camera,this.renderer.domElement),this.renderer.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",this.onWindowResize,!1),this.scene.add(this.ambientLight,this.hemisphereLight,this.directionalLight),this.directionalLight.position.set(150,350,350),this.$refs.scene.appendChild(this.renderer.domElement),this.controls.enablePan=!1,this.camera.position.z=.25,this.animate()}})],H);var X=H,Y=X,G=(0,P.Z)(Y,c,d,!1,null,"0bbba7a8",null),V=G.exports,J=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let K=class extends s.w3{};K=J([(0,s.wA)({components:{Scene:V}})],K);var Q=K,U=Q,ee=(0,P.Z)(U,n,o,!1,null,null,null),te=ee.exports,re=r(563);(0,re.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),i.Z.config.productionTip=!1,new i.Z({render:e=>e(te)}).$mount("#app")}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,i,n,o){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],n=e[l][1],o=e[l][2];for(var c=!0,d=0;d<i.length;d++)(!1&o||s>=o)&&Object.keys(r.O).every((function(e){return r.O[e](i[d])}))?i.splice(d--,1):(c=!1,o<s&&(s=o));if(c){e.splice(l--,1);var a=n();void 0!==a&&(t=a)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[i,n,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,s=i[0],c=i[1],d=i[2],a=0;if(s.some((function(t){return 0!==e[t]}))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(d)var l=d(r)}for(t&&t(i);a<s.length;a++)o=s[a],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},i=self["webpackChunkconnectfour"]=self["webpackChunkconnectfour"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(8384)}));i=r.O(i)})();
//# sourceMappingURL=app.af1d19a5.js.map